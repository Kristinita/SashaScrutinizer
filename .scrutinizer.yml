build:
  # https://scrutinizer-ci.com/docs/build/multiple_test_environment
  nodes:
    python:
      environment:
        # https://scrutinizer-ci.com/docs/guides/python/continuous-integration-deployment#python-version
        python: '3.6.3'
      dependencies:
        # https://scrutinizer-ci.com/docs/guides/python/continuous-integration-deployment#dependencies
        before:
          - pip install yamllint
      tests:
        override:
          # Strict mode: build failed, if any warning:
          # https://yamllint.readthedocs.io/en/stable/configuration.html#errors-and-warnings
          - yamllint -s PaletteMira.yaml
    node:
      environment:
        node: '9.9.0'
      dependencies:
        before:
          - npm install -g yamljs
      deployment:
        -
          branch: SashaDevelop
          commands:
            - yaml2json PaletteMira.yaml > PaletteMira.suricate-profile
            - git config --global user.email "SashaChernykhEmpressOfUniverse@kristinita.ru"
            - git config --global user.name "Kristinita"
            - git commit -m "Scrutinizer commit"
            - git push origin SashaDevelop